(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1654:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(17);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),classnames=__webpack_require__(5),classnames_default=__webpack_require__.n(classnames),useDelayedBoolean=__webpack_require__(680),react_dom=__webpack_require__(59),react_dom_default=__webpack_require__.n(react_dom),Fullscreen_module=__webpack_require__(1688),Fullscreen_module_default=__webpack_require__.n(Fullscreen_module);function Fullscreen(_ref){var children=_ref.children,root=Object(react.useMemo)((function(){return document.getElementById("fullscreenRoot")}),[]);return Object(react.useEffect)((function(){var resetScrollbarPadding=function adjustScrollbarPadding(hideScrollbar){var documentElement=document.documentElement,scrollbarWidthBefore=(document.defaultView||window).innerWidth-documentElement.clientWidth;hideScrollbar();var scrollbarWidthAfter=documentElement.clientWidth-documentElement.offsetWidth;return document.documentElement.style.paddingRight="".concat(scrollbarWidthBefore-scrollbarWidthAfter,"px"),function(){return document.documentElement.style.paddingRight="0"}}((function(){document.getElementById("root").setAttribute("inert",!0),document.body.style.overflow="hidden"}));return function(){resetScrollbarPadding(),document.getElementById("root").removeAttribute("inert",!0),document.body.style.overflow="initial"}}),[]),react_dom_default.a.createPortal(react_default.a.createElement("div",{className:Fullscreen_module_default.a.wrapper},children),root)}var esm=__webpack_require__(1697),SwipeToClose_module=__webpack_require__(1690),SwipeToClose_module_default=__webpack_require__.n(SwipeToClose_module);function SwipeToClose(_ref){var onClose=_ref.onClose,children=_ref.children,start=Object(react.useRef)(),inner=Object(react.useRef)(),ratio=Object(react.useRef)(0),handleTouchStart=Object(react.useCallback)((function(event){start.current=event.touches[0].pageY}),[]),handleTouchMove=Object(react.useCallback)((function(event){var offset=Math.max(-200,Math.min(200,event.touches[0].pageY-start.current));ratio.current=Math.abs(offset/200),requestAnimationFrame((function(){inner.current&&(inner.current.style.setProperty("transition","none"),inner.current.style.setProperty("transform","translate3d(0, ".concat(offset,"px, 0)")),inner.current.style.setProperty("opacity",1-ratio.current))}))}),[]),handleTouchEnd=Object(react.useCallback)((function(event){event.preventDefault(),.5<ratio.current&&onClose(),requestAnimationFrame((function(){inner.current&&(inner.current.style.setProperty("transition","opacity 0.2s linear, transform 0.2s ease"),inner.current.style.setProperty("transform","translate3d(0, 0, 0)"),inner.current.style.setProperty("opacity",1))}))}),[onClose]);return(react_default.a.createElement("div",{className:SwipeToClose_module_default.a.outer,onClick:onClose,onTouchStart:handleTouchStart,onTouchMove:handleTouchMove,onTouchEnd:handleTouchEnd},react_default.a.createElement("div",{className:SwipeToClose_module_default.a.inner,ref:inner},children)))}SwipeToClose.displayName="SwipeToClose",SwipeToClose.__docgenInfo={description:"",methods:[],displayName:"SwipeToClose"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/SwipeToClose.js"]={name:"SwipeToClose",docgenInfo:SwipeToClose.__docgenInfo,path:"src/frontend/SwipeToClose.js"});var ZoomableImage_module=__webpack_require__(1692),ZoomableImage_module_default=__webpack_require__.n(ZoomableImage_module);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ZoomableImage(_ref){var obj,key,value,onClose=_ref.onClose,imageFile=_ref.imageFile,imgRef=Object(react.useRef)(),_useState2=_slicedToArray(Object(react.useState)(!0),2),isVisible=_useState2[0],setIsVisible=_useState2[1],onUpdate=Object(react.useCallback)((function(_ref2){var x=_ref2.x,y=_ref2.y,scale=_ref2.scale;imgRef.current&&imgRef.current.style.setProperty("transform",Object(esm.b)({x:x,y:y,scale:scale}))}),[]),handleClose=Object(react.useCallback)((function(){onClose(),setIsVisible(!1)}),[onClose]);return(react_default.a.createElement("div",{className:ZoomableImage_module_default.a.full},react_default.a.createElement(SwipeToClose,{onClose:handleClose},react_default.a.createElement(esm.a,{containerProps:{className:ZoomableImage_module_default.a.container},onUpdate:onUpdate,isTouch:function isTouch(){return!0},minZoom:.8,maxZoom:5,tapZoomFactor:1.5,draggableUnZoomed:!1,doubleTapToggleZoom:!0,enforceBoundsDuringZoom:!0,centerContained:!0},react_default.a.createElement("img",{src:imageFile.urls.large,width:imageFile.width,height:imageFile.height,alt:"img",ref:imgRef,className:classnames_default()(ZoomableImage_module_default.a.img,(obj={},key=ZoomableImage_module_default.a.visible,value=isVisible,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj))})))))}ZoomableImage.displayName="ZoomableImage",ZoomableImage.__docgenInfo={description:"",methods:[],displayName:"ZoomableImage"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/ExpandableImage/ZoomableImage.js"]={name:"ZoomableImage",docgenInfo:ZoomableImage.__docgenInfo,path:"src/frontend/ExpandableImage/ZoomableImage.js"});var ToggleFullscreenButton=__webpack_require__(1659),useContentElementEditorState=__webpack_require__(146),Viewer_module=__webpack_require__(1694),Viewer_module_default=__webpack_require__.n(Viewer_module);function Viewer_slicedToArray(arr,i){return function Viewer_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Viewer_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function Viewer_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Viewer_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Viewer_arrayLikeToArray(o,minLen)}(arr,i)||function Viewer_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Viewer_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Viewer(_ref){var imageFile=_ref.imageFile,contentElementId=_ref.contentElementId,children=_ref.children,_useState2=Viewer_slicedToArray(Object(react.useState)(!1),2),isFullscreen=_useState2[0],setIsFullscreen=_useState2[1],isRendered=Object(useDelayedBoolean.a)(isFullscreen,{fromTrueToFalse:200}),isVisible=Object(useDelayedBoolean.a)(isFullscreen,{fromFalseToTrue:1}),_useContentElementEdi=Object(useContentElementEditorState.b)(),isEditable=_useContentElementEdi.isEditable,isSelected=_useContentElementEdi.isSelected;Object(react.useEffect)((function(){function handlePopState(){var _window$history$state;setIsFullscreen((null===(_window$history$state=window.history.state)||void 0===_window$history$state?void 0:_window$history$state.fullscreenInlineImage)===contentElementId)}return window.addEventListener("popstate",handlePopState),function(){return window.removeEventListener("popstate",handlePopState)}}));var obj,key,value,enterFullscreen=Object(react.useCallback)((function(){setIsFullscreen(!0),window.parent===window&&window.history.pushState({fullscreenInlineImage:contentElementId},"")}),[contentElementId]),exitFullscreen=Object(react.useCallback)((function(){var _window$history$state2;setIsFullscreen(!1),(null===(_window$history$state2=window.history.state)||void 0===_window$history$state2?void 0:_window$history$state2.fullscreenInlineImage)&&window.parent===window&&window.history.back()}),[]);return Object(react.useEffect)((function(){function handleKeyDown(event){"Escape"===event.key&&exitFullscreen()}return window.addEventListener("keydown",handleKeyDown),function(){return window.removeEventListener("keydown",handleKeyDown)}}),[exitFullscreen]),react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{onClick:enterFullscreen,style:{pointerEvents:isEditable&&!isSelected?"none":void 0}},children,react_default.a.createElement("div",{className:Viewer_module_default.a.controls},react_default.a.createElement(ToggleFullscreenButton.a,{isFullscreen:!1,onEnter:enterFullscreen,onExit:exitFullscreen}))),isRendered&&react_default.a.createElement(Fullscreen,null,react_default.a.createElement("div",{className:classnames_default()(Viewer_module_default.a.wrapper,(obj={},key=Viewer_module_default.a.visible,value=isVisible,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj))},react_default.a.createElement(ZoomableImage,{onClose:exitFullscreen,imageFile:imageFile}),react_default.a.createElement("div",{className:Viewer_module_default.a.controls},react_default.a.createElement(ToggleFullscreenButton.a,{isFullscreen:!0,onEnter:enterFullscreen,onExit:exitFullscreen})))))}__webpack_require__.d(__webpack_exports__,"default",(function(){return Viewer}))},1657:function(module,exports,__webpack_require__){var api=__webpack_require__(9),content=__webpack_require__(1658);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1658:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(8),___CSS_LOADER_ICSS_IMPORT_0___=__webpack_require__(131);(exports=___CSS_LOADER_API_IMPORT___(!1)).i(___CSS_LOADER_ICSS_IMPORT_0___,"",!0),exports.push([module.i,".ToggleFullscreenButton-module_button__eLleY {\n  width: 40px;\n  height: 40px;\n  margin: 0 2px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: currentColor;\n  cursor: pointer;\n}\n\n.ToggleFullscreenButton-module_button__eLleY svg {\n  fill: currentColor;\n  width: 20px;\n  height: 20px;\n}\n",""]),exports.locals={button:"ToggleFullscreenButton-module_button__eLleY "+___CSS_LOADER_ICSS_IMPORT_0___.locals.unstyledButton},module.exports=exports},1659:function(module,__webpack_exports__,__webpack_require__){"use strict";var react=__webpack_require__(0),react_default=__webpack_require__.n(react);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var enterFullscreen=({styles:styles={},...props})=>react_default.a.createElement("svg",_extends({"aria-hidden":"true","data-prefix":"fas","data-icon":"expand",className:(styles["svg-inline--fa"]||"svg-inline--fa")+" "+(styles["fa-expand"]||"fa-expand")+" "+(styles["fa-w-14"]||"fa-w-14"),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},props),react_default.a.createElement("path",{fill:"currentColor",d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"}));function exitFullscreen_extends(){return(exitFullscreen_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var exitFullscreen=({styles:styles={},...props})=>react_default.a.createElement("svg",exitFullscreen_extends({"aria-hidden":"true","data-prefix":"fas","data-icon":"compress",className:(styles["svg-inline--fa"]||"svg-inline--fa")+" "+(styles["fa-compress"]||"fa-compress")+" "+(styles["fa-w-14"]||"fa-w-14"),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},props),react_default.a.createElement("path",{fill:"currentColor",d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"})),i18n=__webpack_require__(29),ToggleFullscreenButton_module=__webpack_require__(1657),ToggleFullscreenButton_module_default=__webpack_require__.n(ToggleFullscreenButton_module);function ToggleFullscreenButton(props){var t=Object(i18n.c)().t;return(react_default.a.createElement("button",{className:ToggleFullscreenButton_module_default.a.button,title:t(props.isFullscreen?"exit_fullscreen":"enter_fullscreen",{scope:"pageflow_scrolled.public"}),onClick:function onClick(){return props.isFullscreen?props.onExit():props.onEnter()}},function icon(props){return props.isFullscreen?_ref:_ref2}(props)))}__webpack_require__.d(__webpack_exports__,"a",(function(){return ToggleFullscreenButton})),ToggleFullscreenButton.displayName="ToggleFullscreenButton";var _ref=react_default.a.createElement(exitFullscreen,null),_ref2=react_default.a.createElement(enterFullscreen,null);ToggleFullscreenButton.__docgenInfo={description:"",methods:[],displayName:"ToggleFullscreenButton"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/ToggleFullscreenButton.js"]={name:"ToggleFullscreenButton",docgenInfo:ToggleFullscreenButton.__docgenInfo,path:"src/frontend/ToggleFullscreenButton.js"})},1688:function(module,exports,__webpack_require__){var api=__webpack_require__(9),content=__webpack_require__(1689);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1689:function(module,exports,__webpack_require__){(exports=__webpack_require__(8)(!1)).push([module.i,".Fullscreen-module_wrapper__eUmdA {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 20000;\n}\n",""]),exports.locals={wrapper:"Fullscreen-module_wrapper__eUmdA"},module.exports=exports},1690:function(module,exports,__webpack_require__){var api=__webpack_require__(9),content=__webpack_require__(1691);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1691:function(module,exports,__webpack_require__){(exports=__webpack_require__(8)(!1)).push([module.i,".SwipeToClose-module_outer__3buOt,\n.SwipeToClose-module_inner__3L3tc {\n  height: 100%;\n}\n",""]),exports.locals={outer:"SwipeToClose-module_outer__3buOt",inner:"SwipeToClose-module_inner__3L3tc"},module.exports=exports},1692:function(module,exports,__webpack_require__){var api=__webpack_require__(9),content=__webpack_require__(1693);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1693:function(module,exports,__webpack_require__){(exports=__webpack_require__(8)(!1)).push([module.i,".ZoomableImage-module_full__2eLrX {\n  height: 100%;\n  width: 100%;\n}\n\n.ZoomableImage-module_container__32sYV {\n  height: 100%;\n}\n\n.ZoomableImage-module_img__1LJxf {\n  max-width: 100%;\n  height: auto;\n  visibility: hidden;\n}\n\n.ZoomableImage-module_visible__3oyq- {\n  visibility: visible;\n}\n",""]),exports.locals={full:"ZoomableImage-module_full__2eLrX",container:"ZoomableImage-module_container__32sYV",img:"ZoomableImage-module_img__1LJxf",visible:"ZoomableImage-module_visible__3oyq-"},module.exports=exports},1694:function(module,exports,__webpack_require__){var api=__webpack_require__(9),content=__webpack_require__(1695);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1695:function(module,exports,__webpack_require__){(exports=__webpack_require__(8)(!1)).push([module.i,".Viewer-module_wrapper__14aX1 {\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0,0,0, 0.9);\n  opacity: 0;\n  transition: opacity 0.2s linear;\n}\n\n.Viewer-module_visible__2Gyc6 {\n  opacity: 1;\n}\n\n.Viewer-module_controls__1hASh {\n  position: absolute;\n  right: 0;\n  top: 0;\n  color: #fff;\n  background: linear-gradient(30deg, transparent, transparent 60%, #000000a6);\n  padding: 5px 5px 40px 70px;\n}\n\n/*\n  On iOS, the fixed background sometimes does not cover the document\n  while navigation bars are being hidden (e.g. iPhone X, iOS\n  15.4.1). Applying the transform appears to fix this. Dragging the\n  zoomed image, makes the navigation bars show up and resizes the\n  viewport. We give the element a fixed height to prevent wonky\n  effects while the viewport resizes. Since relying on `vh` directly\n  causes problems in iOS in-app browsers, we apply the --vh\n  workaround.\n\n  Since only Mobile Safari supports `-webkit-touch-callout` [1], we\n  can use it to reset `word-wrap` for iOS only.\n\n  [1] https://stackoverflow.com/questions/30102792/css-media-query-to-target-only-ios-devices\n*/\n@supports (-webkit-touch-callout: none) {\n  .Viewer-module_wrapper__14aX1 {\n    transform: scale(1);\n    height: calc(100 * var(--vh));\n  }\n}\n",""]),exports.locals={wrapper:"Viewer-module_wrapper__14aX1",visible:"Viewer-module_visible__2Gyc6",controls:"Viewer-module_controls__1hASh"},module.exports=exports}}]);
//# sourceMappingURL=3.7ac2a7265265784bef4d.bundle.js.map