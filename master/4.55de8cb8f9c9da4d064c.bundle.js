(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1686:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(17);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),classnames=__webpack_require__(6),classnames_default=__webpack_require__.n(classnames),view360_esm=__webpack_require__(1724),screenfull=__webpack_require__(1711),screenfull_default=__webpack_require__.n(screenfull),ToggleFullscreenCornerButton=__webpack_require__(314),useBrowserFeature=__webpack_require__(369),usePhonePlatform=__webpack_require__(540),react_dom=__webpack_require__(54),react_dom_default=__webpack_require__.n(react_dom),Fullscreen_module=__webpack_require__(1712),Fullscreen_module_default=__webpack_require__.n(Fullscreen_module);function Fullscreen(_ref){var isFullscreen=_ref.isFullscreen,children=_ref.children,root=Object(react.useMemo)((function(){return document.getElementById("fullscreenRoot")}),[]);return Object(react.useEffect)((function(){document.body.style.overflow=isFullscreen?"hidden":"initial"}),[isFullscreen]),isFullscreen?react_dom_default.a.createPortal(react_default.a.createElement("div",{className:Fullscreen_module_default.a.wrapper},children),root):children}__webpack_require__(18);var arrowLeft=__webpack_require__(541),arrowRight=__webpack_require__(517),PanoramaIndicator_module=__webpack_require__(1714),PanoramaIndicator_module_default=__webpack_require__.n(PanoramaIndicator_module);function PanoramaIndicator(_ref){var obj,key,value,visible=_ref.visible;return(react_default.a.createElement("div",{className:classnames_default()(PanoramaIndicator_module_default.a.indicator,(obj={},key=PanoramaIndicator_module_default.a.visible,value=visible,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj))},react_default.a.createElement("div",{className:PanoramaIndicator_module_default.a.arrowLeft},react_default.a.createElement("div",null,react_default.a.createElement(arrowLeft.a,{width:40,height:40}))),react_default.a.createElement("div",{className:PanoramaIndicator_module_default.a.arrowRight},react_default.a.createElement("div",null,react_default.a.createElement(arrowRight.a,{width:40,height:40}))),react_default.a.createElement("div",{className:PanoramaIndicator_module_default.a.text},"360°")))}PanoramaIndicator.displayName="PanoramaIndicator",PanoramaIndicator.__docgenInfo={description:"",methods:[],displayName:"PanoramaIndicator"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/Panorama/PanoramaIndicator.js"]={name:"PanoramaIndicator",docgenInfo:PanoramaIndicator.__docgenInfo,path:"src/frontend/Panorama/PanoramaIndicator.js"});var FullscreenIndicator_module=__webpack_require__(1716),FullscreenIndicator_module_default=__webpack_require__.n(FullscreenIndicator_module);function FullscreenIndicator(_ref){var obj,key,value,visible=_ref.visible;_ref.onClick;return(react_default.a.createElement("div",{className:classnames_default()(FullscreenIndicator_module_default.a.indicator,(obj={},key=FullscreenIndicator_module_default.a.visible,value=visible,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj))},react_default.a.createElement("div",{className:FullscreenIndicator_module_default.a.icons},react_default.a.createElement("div",{className:FullscreenIndicator_module_default.a.iconTopLeft},react_default.a.createElement(arrowLeft.a,{width:50,height:50})),react_default.a.createElement("div",{className:FullscreenIndicator_module_default.a.iconTopRight},react_default.a.createElement(arrowLeft.a,{width:50,height:50})),react_default.a.createElement("div",{className:FullscreenIndicator_module_default.a.iconBottomRight},react_default.a.createElement(arrowLeft.a,{width:50,height:50})),react_default.a.createElement("div",{className:FullscreenIndicator_module_default.a.iconBottomLeft},react_default.a.createElement(arrowLeft.a,{width:50,height:50}))),react_default.a.createElement("div",{className:FullscreenIndicator_module_default.a.text},"360°")))}FullscreenIndicator.displayName="FullscreenIndicator",FullscreenIndicator.__docgenInfo={description:"",methods:[],displayName:"FullscreenIndicator"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/Panorama/FullscreenIndicator.js"]={name:"FullscreenIndicator",docgenInfo:FullscreenIndicator.__docgenInfo,path:"src/frontend/Panorama/FullscreenIndicator.js"});var Viewer_module=__webpack_require__(1718),Viewer_module_default=__webpack_require__.n(Viewer_module);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var spinner=({styles:styles={},...props})=>react_default.a.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},props),react_default.a.createElement("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",opacity:".23"}),react_default.a.createElement("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",opacity:".75"}));function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Viewer(_ref){var obj,key,value,imageFile=_ref.imageFile,viewerRef=_ref.viewerRef,initialYaw=_ref.initialYaw,initialPitch=_ref.initialPitch,hidePanoramaIndicator=_ref.hidePanoramaIndicator,onReady=_ref.onReady,onFullscreen=_ref.onFullscreen,elRef=Object(react.useRef)(),initialYawRef=Object(react.useRef)(initialYaw),initialPitchRef=Object(react.useRef)(initialPitch),touchSupport=Object(useBrowserFeature.b)("touch support"),_useState2=_slicedToArray(Object(react.useState)(!0),2),isLoading=_useState2[0],setIsLoading=_useState2[1],_useState4=_slicedToArray(Object(react.useState)(!1),2),isFullscreen=_useState4[0],setIsFullscreen=_useState4[1],isPhonePlatform=Object(usePhonePlatform.a)();function enterFullscreen(){onFullscreen&&onFullscreen(),screenfull_default.a.isEnabled&&screenfull_default.a.request(),setIsFullscreen(!0),viewerRef.current.enableSensor()}return Object(react.useEffect)((function(){return function(){elRef.current&&(viewerRef.current.destroy(),viewerRef.current=null,elRef.current=null)}}),[viewerRef]),Object(react.useEffect)((function(){initialYawRef.current!==initialYaw&&(initialYawRef.current=initialYaw,viewerRef.current.lookAt({yaw:initialYaw},200))}),[initialYaw,viewerRef]),Object(react.useEffect)((function(){initialPitchRef.current!==initialPitch&&(initialPitchRef.current=initialPitch,viewerRef.current.lookAt({pitch:initialPitch},200))}),[initialPitch,viewerRef]),Object(react.useEffect)((function(){function onChange(){screenfull_default.a.isFullscreen||setIsFullscreen(!1)}if(screenfull_default.a.isEnabled)return screenfull_default.a.on("change",onChange),function(){return screenfull_default.a.off("change",onChange)}}),[]),Object(react.useEffect)((function(){function onChange(){viewerRef.current.updateViewportDimensions()}return window.addEventListener("resize",onChange),function(){return window.removeEventListener("resize",onChange)}}),[viewerRef]),Object(react.useEffect)((function(){isFullscreen?(viewerRef.current.setTouchDirection(view360_esm.a.TOUCH_DIRECTION.ALL),viewerRef.current.setGyroMode(view360_esm.a.GYRO_MODE.YAWPITCH),viewerRef.current.setUseZoom(!0)):(touchSupport?(viewerRef.current.setTouchDirection(view360_esm.a.TOUCH_DIRECTION.YAW),viewerRef.current.lookAt({pitch:0,fov:65})):viewerRef.current.lookAt({fov:65}),viewerRef.current.setGyroMode(view360_esm.a.GYRO_MODE.NONE),viewerRef.current.setUseZoom(!1))}),[isFullscreen,viewerRef,touchSupport]),react_default.a.createElement(Fullscreen,{isFullscreen:isFullscreen},react_default.a.createElement("div",{className:Viewer_module_default.a.container,onKeyDown:function(event){"ArrowUp"!==event.key&&"ArrowDown"!==event.key||event.preventDefault()},onClick:function onClick(){isPhonePlatform&&enterFullscreen()}},react_default.a.createElement(DOMNodeContainer,{className:Viewer_module_default.a.full,onUpdate:function onUpdate(el){return function appendViewerTo(parentNode){elRef.current||(elRef.current=document.createElement("div"),elRef.current.className=Viewer_module_default.a.full,viewerRef.current=new view360_esm.a(elRef.current,{image:imageFile.urls.ultra,projectionType:"equirectangular_stereo"===imageFile.configuration.projection?view360_esm.a.PROJECTION_TYPE.STEREOSCOPIC_EQUI:view360_esm.a.PROJECTION_TYPE.EQUIRECTANGULAR,touchDirection:touchSupport?view360_esm.a.TOUCH_DIRECTION.YAW:view360_esm.a.TOUCH_DIRECTION.ALL,useZoom:!1,yaw:initialYawRef.current,pitch:initialPitchRef.current}),viewerRef.current.on(view360_esm.a.EVENTS.READY,(function(){viewerRef.current.updateViewportDimensions(),setIsLoading(!1),onReady&&onReady()}))),parentNode.appendChild(elRef.current),viewerRef.current.updateViewportDimensions()}(el)}})),react_default.a.createElement(spinner,{className:classnames_default()(Viewer_module_default.a.spinner,(obj={},key=Viewer_module_default.a.isLoading,value=isLoading,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj))}),(!isPhonePlatform||isFullscreen)&&react_default.a.createElement(ToggleFullscreenCornerButton.a,{isFullscreen:isFullscreen,onEnter:enterFullscreen,onExit:function(){screenfull_default.a.isEnabled&&screenfull_default.a.exit(),setIsFullscreen(!1)}}),react_default.a.createElement(PanoramaIndicator,{visible:!(isLoading||isPhonePlatform||isFullscreen||hidePanoramaIndicator)}),react_default.a.createElement(FullscreenIndicator,{visible:!isLoading&&isPhonePlatform&&!isFullscreen}))}__webpack_require__.d(__webpack_exports__,"default",(function(){return Viewer})),Viewer.displayName="Viewer";var DOMNodeContainer=react_default.a.memo((function(_ref2){var className=_ref2.className,onUpdate=_ref2.onUpdate,ref=Object(react.useRef)();return Object(react.useEffect)((function(){var current=ref.current;return onUpdate(current),function(){current.removeChild(current.firstChild)}})),react_default.a.createElement("div",{ref:ref,className:className})}),(function(){return!0}));Viewer.__docgenInfo={description:"",methods:[],displayName:"Viewer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/Panorama/Viewer.js"]={name:"Viewer",docgenInfo:Viewer.__docgenInfo,path:"src/frontend/Panorama/Viewer.js"})},1712:function(module,exports,__webpack_require__){var api=__webpack_require__(9),content=__webpack_require__(1713);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1713:function(module,exports,__webpack_require__){(exports=__webpack_require__(8)(!1)).push([module.i,".Fullscreen-module_wrapper__1WV01 {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100vh;\n  z-index: 20000;\n}\n",""]),exports.locals={wrapper:"Fullscreen-module_wrapper__1WV01"},module.exports=exports},1714:function(module,exports,__webpack_require__){var api=__webpack_require__(9),content=__webpack_require__(1715);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1715:function(module,exports,__webpack_require__){(exports=__webpack_require__(8)(!1)).push([module.i,".PanoramaIndicator-module_indicator__AsTQx {\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.2s linear, transform 0.2s ease;\n}\n\n.PanoramaIndicator-module_visible__1l_KZ {\n  opacity: 1;\n}\n\n.PanoramaIndicator-module_arrow__2pQSb {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.PanoramaIndicator-module_arrowLeft__2LBPR {\n  margin-left: -50px;\n}\n\n.PanoramaIndicator-module_arrowRight__J7y_c {\n  margin-left: 50px;\n}\n\n.PanoramaIndicator-module_arrowLeft__2LBPR div {\n  -webkit-animation: PanoramaIndicator-module_nudgeLeft__1ckcE 4s infinite ease;\n          animation: PanoramaIndicator-module_nudgeLeft__1ckcE 4s infinite ease;\n}\n\n.PanoramaIndicator-module_arrowRight__J7y_c div {\n  -webkit-animation: PanoramaIndicator-module_nudgeRight__3ZqpG 4s infinite ease;\n          animation: PanoramaIndicator-module_nudgeRight__3ZqpG 4s infinite ease;\n}\n\n.PanoramaIndicator-module_text__3G-sa {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-weight: bold;\n  font-size: 30px;\n  text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);\n  margin-top: -3px;\n  margin-left: 3px;\n}\n\n.PanoramaIndicator-module_indicator__AsTQx svg {\n  transition: transform 0.2s ease;\n}\n\n*:hover > .PanoramaIndicator-module_indicator__AsTQx svg {\n  transform: scale(1.2);\n}\n\n.PanoramaIndicator-module_arrow__2pQSb div::before {\n  content: ' ';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 30px;\n  height: 30px;\n  transform: translate(-50%, -50%);\n  background: radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%);\n  z-index: -1;\n}\n\n@-webkit-keyframes PanoramaIndicator-module_nudgeLeft__1ckcE {\n  0% {\n  }\n  50% {\n    transform: translateX(-10px);\n  }\n  100% {\n  }\n}\n\n@keyframes PanoramaIndicator-module_nudgeLeft__1ckcE {\n  0% {\n  }\n  50% {\n    transform: translateX(-10px);\n  }\n  100% {\n  }\n}\n\n@-webkit-keyframes PanoramaIndicator-module_nudgeRight__3ZqpG {\n  0% {\n  }\n  50% {\n    transform: translateX(10px);\n  }\n  100% {\n  }\n}\n\n@keyframes PanoramaIndicator-module_nudgeRight__3ZqpG {\n  0% {\n  }\n  50% {\n    transform: translateX(10px);\n  }\n  100% {\n  }\n}\n",""]),exports.locals={indicator:"PanoramaIndicator-module_indicator__AsTQx",visible:"PanoramaIndicator-module_visible__1l_KZ",arrow:"PanoramaIndicator-module_arrow__2pQSb",arrowLeft:"PanoramaIndicator-module_arrowLeft__2LBPR PanoramaIndicator-module_arrow__2pQSb",arrowRight:"PanoramaIndicator-module_arrowRight__J7y_c PanoramaIndicator-module_arrow__2pQSb",nudgeLeft:"PanoramaIndicator-module_nudgeLeft__1ckcE",nudgeRight:"PanoramaIndicator-module_nudgeRight__3ZqpG",text:"PanoramaIndicator-module_text__3G-sa"},module.exports=exports},1716:function(module,exports,__webpack_require__){var api=__webpack_require__(9),content=__webpack_require__(1717);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1717:function(module,exports,__webpack_require__){(exports=__webpack_require__(8)(!1)).push([module.i,".FullscreenIndicator-module_indicator__yhpSu {\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.FullscreenIndicator-module_visible__292BZ {\n  visibility: visible;\n}\n\n.FullscreenIndicator-module_icon__3R3FS,\n.FullscreenIndicator-module_icons__3dyBL,\n.FullscreenIndicator-module_text__1wWMe {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n}\n\n.FullscreenIndicator-module_text__1wWMe {\n  transform: translate(-50%, -50%);\n  font-weight: bold;\n  font-size: 25px;\n  text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);\n  margin-top: -3px;\n  margin-left: 3px;\n}\n\n.FullscreenIndicator-module_icons__3dyBL {\n  -webkit-animation: FullscreenIndicator-module_pulse__pljk9 4s infinite ease;\n          animation: FullscreenIndicator-module_pulse__pljk9 4s infinite ease;\n}\n\n.FullscreenIndicator-module_icon__3R3FS::before {\n  content: ' ';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 45px;\n  height: 45px;\n  transform: translate(-45%, -50%);\n  background: radial-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0) 60%);\n  z-index: -1;\n}\n\n.FullscreenIndicator-module_iconTopLeft__1iJhP {\n  transform: translate(-50%, -50%) rotate(45deg);\n  margin-left: -40px;\n  margin-top: -40px;\n}\n\n.FullscreenIndicator-module_iconTopRight__3UAOY {\n  transform: translate(-50%, -50%) rotate(135deg);\n  margin-left: 40px;\n  margin-top: -40px;\n}\n\n.FullscreenIndicator-module_iconBottomRight__3OUn_ {\n  transform: translate(-50%, -50%) rotate(225deg);\n  margin-left: 40px;\n  margin-top: 40px;\n}\n\n.FullscreenIndicator-module_iconBottomLeft__2JRRi {\n  transform: translate(-50%, -50%) rotate(315deg);\n  margin-left: -40px;\n  margin-top: 40px;\n}\n\n@-webkit-keyframes FullscreenIndicator-module_pulse__pljk9 {\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(1.1);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n}\n\n@keyframes FullscreenIndicator-module_pulse__pljk9 {\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(1.1);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n}\n",""]),exports.locals={indicator:"FullscreenIndicator-module_indicator__yhpSu",visible:"FullscreenIndicator-module_visible__292BZ",icon:"FullscreenIndicator-module_icon__3R3FS",icons:"FullscreenIndicator-module_icons__3dyBL",text:"FullscreenIndicator-module_text__1wWMe",pulse:"FullscreenIndicator-module_pulse__pljk9",iconTopLeft:"FullscreenIndicator-module_iconTopLeft__1iJhP FullscreenIndicator-module_icon__3R3FS",iconTopRight:"FullscreenIndicator-module_iconTopRight__3UAOY FullscreenIndicator-module_icon__3R3FS",iconBottomRight:"FullscreenIndicator-module_iconBottomRight__3OUn_ FullscreenIndicator-module_icon__3R3FS",iconBottomLeft:"FullscreenIndicator-module_iconBottomLeft__2JRRi FullscreenIndicator-module_icon__3R3FS"},module.exports=exports},1718:function(module,exports,__webpack_require__){var api=__webpack_require__(9),content=__webpack_require__(1719);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1719:function(module,exports,__webpack_require__){(exports=__webpack_require__(8)(!1)).push([module.i,".Viewer-module_full__1Vx7O {\n  height: 100%;\n}\n\n.Viewer-module_container__oQ_yg {\n  background-color: #000;\n  color: #fff;\n  cursor: move;\n}\n\n.Viewer-module_spinner__2HKB0 {\n  -webkit-animation: Viewer-module_spin__2oSYC 0.75s linear infinite;\n          animation: Viewer-module_spin__2oSYC 0.75s linear infinite;\n  width: 40px;\n  height: 40px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin: -20px -20px;\n  display: none;\n}\n\n.Viewer-module_spinner__2HKB0.Viewer-module_isLoading__1W-P6 {\n  display: block;\n}\n\n@-webkit-keyframes Viewer-module_spin__2oSYC {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes Viewer-module_spin__2oSYC {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n",""]),exports.locals={full:"Viewer-module_full__1Vx7O",container:"Viewer-module_container__oQ_yg Viewer-module_full__1Vx7O",spinner:"Viewer-module_spinner__2HKB0",spin:"Viewer-module_spin__2oSYC",isLoading:"Viewer-module_isLoading__1W-P6"},module.exports=exports}}]);
//# sourceMappingURL=4.55de8cb8f9c9da4d064c.bundle.js.map